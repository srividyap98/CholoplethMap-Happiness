(function () {
	'use strict';

	// initial setup
	const svg = d3.select("svg"),
		width = svg.attr("width"),
		height = svg.attr("height"),
		path = d3.geoPath(),
		data = d3.map(),
		worldmap = "https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson",
		worldHappiness = "https://gist.githubusercontent.com/CrossZeigler/f848bea0d8dfa80665f0a44d0c969f4f/raw/AIT684_FinalDataSetPlus_2019.csv";

	let centered, world;

	// style of geographic projection and scaling
	const projection = d3.geoRobinson()
		.scale(130)
		.translate([width / 2, height / 2]);

	// Define color scale
	const colorScale = d3.scaleThreshold()
		.domain([1, 2, 3, 4, 5, 6, 7, 8])
		.range(d3.schemeOrRd[8]);

	//	.domain([2.5, 3.6, 4.7, 5.8, 6.9, 8])
	//	.range(d3.schemeOrRd[5]);

	//	.domain([2.5, 3, 3.5, 4, 4.5, 5, 5.5, 6, 6.5, 7, 7.5])
	//	.range(d3.schemeOrRd[9]);

	// add tooltip
	const tooltip = d3.select("body").append("div")
		.attr("class", "tooltip")
		.style("opacity", 0);

	// Load external data and boot
	d3.queue()
		.defer(d3.json, worldmap)
		.defer(d3.csv, worldHappiness, function(d) {
			data.set(d.Code, +d.Happiness_Score);
		})
		.await(ready);

	// Add clickable background
	svg.append("rect")
	  .attr("class", "background")
		.attr("width", width)
		.attr("height", height)
		.on("click", click);


	// ----------------------------
	//Start of Choropleth drawing
	// ----------------------------

	function ready(error, topo) {
		// topo is the data received from the d3.queue function (the world.geojson)
		// the data from world_population.csv (country code and country population) is saved in data variable

		let mouseOver = function(d) {
			d3.selectAll(".Country")
				.transition()
				.duration(200)
				.style("opacity", .5)
				.style("stroke", "transparent");
			d3.select(this)
				.transition()
				.duration(200)
				.style("opacity", 1)
				.style("stroke", "black");
			tooltip.style("left", (d3.event.pageX + 15) + "px")
				.style("top", (d3.event.pageY - 28) + "px")
				.transition().duration(400)
				.style("opacity", 1)
				.text(d.properties.name + ': Happiness Score of ' + (d.total / 1) * 1) / 1;
		};

		let mouseLeave = function() {
			d3.selectAll(".Country")
				.transition()
				.duration(200)
				.style("opacity", 1)
				.style("stroke", "transparent");
			tooltip.transition().duration(300)
				.style("opacity", 0);
		};

		// Draw the map
		world = svg.append("g")
	    .attr("class", "world");
		world.selectAll("path")
			.data(topo.features)
			.enter()
			.append("path")
			// draw each country
			// d3.geoPath() is a built-in function of d3 v4 and takes care of showing the map from a properly formatted geojson file, if necessary filtering it through a predefined geographic projection
			.attr("d", d3.geoPath().projection(projection))

			//retrieve the name of the country from data
			.attr("data-name", function(d) {
				return d.properties.name
			})

			// set the color of each country
			.attr("fill", function(d) {
				d.total = data.get(d.id) || 0;
				return colorScale(d.total);
			})

			// add a class, styling and mouseover/mouseleave and click functions
			.style("stroke", "transparent")
			.attr("class", function(d) {
				return "Country"
			})
			.attr("id", function(d) {
				return d.id
			})
			.style("opacity", 1)
			.on("mouseover", mouseOver)
			.on("mouseleave", mouseLeave)
			.on("click", click);
	  
		// Legend
		const x = d3.scaleLinear()
			.domain([0, 8])
			.rangeRound([0, 1]);

		const legend = svg.append("g")
			.attr("id", "legend");

		const legend_entry = legend.selectAll("g.legend")
			.data(colorScale.range().map(function(d) {
				d = colorScale.invertExtent(d);
				if (d[0] == null) d[0] = x.domain()[0];
				if (d[1] == null) d[1] = x.domain()[1];
				return d;
			}))
			.enter().append("g")
			.attr("class", "legend_entry");

		const ls_w = 20,
			ls_h = 20;

		legend_entry.append("rect")
			.attr("x", 20)
			.attr("y", function(d, i) {
				return height - (i * ls_h) - 2 * ls_h;
			})
			.attr("width", ls_w)
			.attr("height", ls_h)
			.style("fill", function(d) {
				return colorScale(d[0]);
			})
			.style("opacity", 0.8);

	  /* Can control legend number properties here*/
		legend_entry.append("text")
	  .attr("stroke", "black")
			.attr("x", 50)
			.attr("y", function(d, i) {
				return height - (i * ls_h) - ls_h - 6;
			}).text(function(d, i) {
				if (i === 0) return "< " + d[1] + "";
				if (d[1] < d[0]) return d[0] + " m";
				return d[0] + " - " + d[1] + "";
			});

	  /* Can control attributes of text here
	  a lower y value will make the legend title higher in the display*/
		legend.append("text").attr("x", 15).attr("y", 260)
	    .attr("stroke", "black")
	    .text("Happiness Score");
	}

	// Zoom functionality
	function click(d) {
	  var x, y, k;

	  if (d && centered !== d) {
	    var centroid = path.centroid(d);
	    x = -(centroid[0] * 6);
	    y = (centroid[1] * 6);
	    k = 3;
	    centered = d;
	  } else {
	    x = 0;
	    y = 0;
	    k = 1;
	    centered = null;
	  }

	  world.selectAll("path")
	      .classed("active", centered && function(d) { return d === centered; });

	  world.transition()
	      .duration(750)
	      .attr("transform", "translate(" + x + "," + y + ") scale(" + k + ")" );
	  
	}

}());

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGluaXRpYWwgc2V0dXBcbmNvbnN0IHN2ZyA9IGQzLnNlbGVjdChcInN2Z1wiKSxcblx0d2lkdGggPSBzdmcuYXR0cihcIndpZHRoXCIpLFxuXHRoZWlnaHQgPSBzdmcuYXR0cihcImhlaWdodFwiKSxcblx0cGF0aCA9IGQzLmdlb1BhdGgoKSxcblx0ZGF0YSA9IGQzLm1hcCgpLFxuXHR3b3JsZG1hcCA9IFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2hvbHR6eS9EMy1ncmFwaC1nYWxsZXJ5L21hc3Rlci9EQVRBL3dvcmxkLmdlb2pzb25cIixcblx0d29ybGRIYXBwaW5lc3MgPSBcImh0dHBzOi8vZ2lzdC5naXRodWJ1c2VyY29udGVudC5jb20vQ3Jvc3NaZWlnbGVyL2Y4NDhiZWEwZDhkZmE4MDY2NWYwYTQ0ZDBjOTY5ZjRmL3Jhdy9BSVQ2ODRfRmluYWxEYXRhU2V0UGx1c18yMDE5LmNzdlwiO1xuXG5sZXQgY2VudGVyZWQsIHdvcmxkO1xuXG4vLyBzdHlsZSBvZiBnZW9ncmFwaGljIHByb2plY3Rpb24gYW5kIHNjYWxpbmdcbmNvbnN0IHByb2plY3Rpb24gPSBkMy5nZW9Sb2JpbnNvbigpXG5cdC5zY2FsZSgxMzApXG5cdC50cmFuc2xhdGUoW3dpZHRoIC8gMiwgaGVpZ2h0IC8gMl0pO1xuXG4vLyBEZWZpbmUgY29sb3Igc2NhbGVcbmNvbnN0IGNvbG9yU2NhbGUgPSBkMy5zY2FsZVRocmVzaG9sZCgpXG5cdC5kb21haW4oWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDhdKVxuXHQucmFuZ2UoZDMuc2NoZW1lT3JSZFs4XSk7XG5cbi8vXHQuZG9tYWluKFsyLjUsIDMuNiwgNC43LCA1LjgsIDYuOSwgOF0pXG4vL1x0LnJhbmdlKGQzLnNjaGVtZU9yUmRbNV0pO1xuXG4vL1x0LmRvbWFpbihbMi41LCAzLCAzLjUsIDQsIDQuNSwgNSwgNS41LCA2LCA2LjUsIDcsIDcuNV0pXG4vL1x0LnJhbmdlKGQzLnNjaGVtZU9yUmRbOV0pO1xuXG4vLyBhZGQgdG9vbHRpcFxuY29uc3QgdG9vbHRpcCA9IGQzLnNlbGVjdChcImJvZHlcIikuYXBwZW5kKFwiZGl2XCIpXG5cdC5hdHRyKFwiY2xhc3NcIiwgXCJ0b29sdGlwXCIpXG5cdC5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XG5cbi8vIExvYWQgZXh0ZXJuYWwgZGF0YSBhbmQgYm9vdFxuZDMucXVldWUoKVxuXHQuZGVmZXIoZDMuanNvbiwgd29ybGRtYXApXG5cdC5kZWZlcihkMy5jc3YsIHdvcmxkSGFwcGluZXNzLCBmdW5jdGlvbihkKSB7XG5cdFx0ZGF0YS5zZXQoZC5Db2RlLCArZC5IYXBwaW5lc3NfU2NvcmUpO1xuXHR9KVxuXHQuYXdhaXQocmVhZHkpO1xuXG4vLyBBZGQgY2xpY2thYmxlIGJhY2tncm91bmRcbnN2Zy5hcHBlbmQoXCJyZWN0XCIpXG4gIC5hdHRyKFwiY2xhc3NcIiwgXCJiYWNrZ3JvdW5kXCIpXG5cdC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG5cdC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcblx0Lm9uKFwiY2xpY2tcIiwgY2xpY2spO1xuXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vU3RhcnQgb2YgQ2hvcm9wbGV0aCBkcmF3aW5nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmZ1bmN0aW9uIHJlYWR5KGVycm9yLCB0b3BvKSB7XG5cdC8vIHRvcG8gaXMgdGhlIGRhdGEgcmVjZWl2ZWQgZnJvbSB0aGUgZDMucXVldWUgZnVuY3Rpb24gKHRoZSB3b3JsZC5nZW9qc29uKVxuXHQvLyB0aGUgZGF0YSBmcm9tIHdvcmxkX3BvcHVsYXRpb24uY3N2IChjb3VudHJ5IGNvZGUgYW5kIGNvdW50cnkgcG9wdWxhdGlvbikgaXMgc2F2ZWQgaW4gZGF0YSB2YXJpYWJsZVxuXG5cdGxldCBtb3VzZU92ZXIgPSBmdW5jdGlvbihkKSB7XG5cdFx0ZDMuc2VsZWN0QWxsKFwiLkNvdW50cnlcIilcblx0XHRcdC50cmFuc2l0aW9uKClcblx0XHRcdC5kdXJhdGlvbigyMDApXG5cdFx0XHQuc3R5bGUoXCJvcGFjaXR5XCIsIC41KVxuXHRcdFx0LnN0eWxlKFwic3Ryb2tlXCIsIFwidHJhbnNwYXJlbnRcIik7XG5cdFx0ZDMuc2VsZWN0KHRoaXMpXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuZHVyYXRpb24oMjAwKVxuXHRcdFx0LnN0eWxlKFwib3BhY2l0eVwiLCAxKVxuXHRcdFx0LnN0eWxlKFwic3Ryb2tlXCIsIFwiYmxhY2tcIik7XG5cdFx0dG9vbHRpcC5zdHlsZShcImxlZnRcIiwgKGQzLmV2ZW50LnBhZ2VYICsgMTUpICsgXCJweFwiKVxuXHRcdFx0LnN0eWxlKFwidG9wXCIsIChkMy5ldmVudC5wYWdlWSAtIDI4KSArIFwicHhcIilcblx0XHRcdC50cmFuc2l0aW9uKCkuZHVyYXRpb24oNDAwKVxuXHRcdFx0LnN0eWxlKFwib3BhY2l0eVwiLCAxKVxuXHRcdFx0LnRleHQoZC5wcm9wZXJ0aWVzLm5hbWUgKyAnOiBIYXBwaW5lc3MgU2NvcmUgb2YgJyArIChkLnRvdGFsIC8gMSkgKiAxKSAvIDE7XG5cdH1cblxuXHRsZXQgbW91c2VMZWF2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGQzLnNlbGVjdEFsbChcIi5Db3VudHJ5XCIpXG5cdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHQuZHVyYXRpb24oMjAwKVxuXHRcdFx0LnN0eWxlKFwib3BhY2l0eVwiLCAxKVxuXHRcdFx0LnN0eWxlKFwic3Ryb2tlXCIsIFwidHJhbnNwYXJlbnRcIik7XG5cdFx0dG9vbHRpcC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMzAwKVxuXHRcdFx0LnN0eWxlKFwib3BhY2l0eVwiLCAwKTtcblx0fVxuXG5cdC8vIERyYXcgdGhlIG1hcFxuXHR3b3JsZCA9IHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcIndvcmxkXCIpO1xuXHR3b3JsZC5zZWxlY3RBbGwoXCJwYXRoXCIpXG5cdFx0LmRhdGEodG9wby5mZWF0dXJlcylcblx0XHQuZW50ZXIoKVxuXHRcdC5hcHBlbmQoXCJwYXRoXCIpXG5cdFx0Ly8gZHJhdyBlYWNoIGNvdW50cnlcblx0XHQvLyBkMy5nZW9QYXRoKCkgaXMgYSBidWlsdC1pbiBmdW5jdGlvbiBvZiBkMyB2NCBhbmQgdGFrZXMgY2FyZSBvZiBzaG93aW5nIHRoZSBtYXAgZnJvbSBhIHByb3Blcmx5IGZvcm1hdHRlZCBnZW9qc29uIGZpbGUsIGlmIG5lY2Vzc2FyeSBmaWx0ZXJpbmcgaXQgdGhyb3VnaCBhIHByZWRlZmluZWQgZ2VvZ3JhcGhpYyBwcm9qZWN0aW9uXG5cdFx0LmF0dHIoXCJkXCIsIGQzLmdlb1BhdGgoKS5wcm9qZWN0aW9uKHByb2plY3Rpb24pKVxuXG5cdFx0Ly9yZXRyaWV2ZSB0aGUgbmFtZSBvZiB0aGUgY291bnRyeSBmcm9tIGRhdGFcblx0XHQuYXR0cihcImRhdGEtbmFtZVwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRyZXR1cm4gZC5wcm9wZXJ0aWVzLm5hbWVcblx0XHR9KVxuXG5cdFx0Ly8gc2V0IHRoZSBjb2xvciBvZiBlYWNoIGNvdW50cnlcblx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0ZC50b3RhbCA9IGRhdGEuZ2V0KGQuaWQpIHx8IDA7XG5cdFx0XHRyZXR1cm4gY29sb3JTY2FsZShkLnRvdGFsKTtcblx0XHR9KVxuXG5cdFx0Ly8gYWRkIGEgY2xhc3MsIHN0eWxpbmcgYW5kIG1vdXNlb3Zlci9tb3VzZWxlYXZlIGFuZCBjbGljayBmdW5jdGlvbnNcblx0XHQuc3R5bGUoXCJzdHJva2VcIiwgXCJ0cmFuc3BhcmVudFwiKVxuXHRcdC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0cmV0dXJuIFwiQ291bnRyeVwiXG5cdFx0fSlcblx0XHQuYXR0cihcImlkXCIsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdHJldHVybiBkLmlkXG5cdFx0fSlcblx0XHQuc3R5bGUoXCJvcGFjaXR5XCIsIDEpXG5cdFx0Lm9uKFwibW91c2VvdmVyXCIsIG1vdXNlT3Zlcilcblx0XHQub24oXCJtb3VzZWxlYXZlXCIsIG1vdXNlTGVhdmUpXG5cdFx0Lm9uKFwiY2xpY2tcIiwgY2xpY2spO1xuICBcblx0Ly8gTGVnZW5kXG5cdGNvbnN0IHggPSBkMy5zY2FsZUxpbmVhcigpXG5cdFx0LmRvbWFpbihbMCwgOF0pXG5cdFx0LnJhbmdlUm91bmQoWzAsIDFdKTtcblxuXHRjb25zdCBsZWdlbmQgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuXHRcdC5hdHRyKFwiaWRcIiwgXCJsZWdlbmRcIik7XG5cblx0Y29uc3QgbGVnZW5kX2VudHJ5ID0gbGVnZW5kLnNlbGVjdEFsbChcImcubGVnZW5kXCIpXG5cdFx0LmRhdGEoY29sb3JTY2FsZS5yYW5nZSgpLm1hcChmdW5jdGlvbihkKSB7XG5cdFx0XHRkID0gY29sb3JTY2FsZS5pbnZlcnRFeHRlbnQoZCk7XG5cdFx0XHRpZiAoZFswXSA9PSBudWxsKSBkWzBdID0geC5kb21haW4oKVswXTtcblx0XHRcdGlmIChkWzFdID09IG51bGwpIGRbMV0gPSB4LmRvbWFpbigpWzFdO1xuXHRcdFx0cmV0dXJuIGQ7XG5cdFx0fSkpXG5cdFx0LmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuXHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJsZWdlbmRfZW50cnlcIik7XG5cblx0Y29uc3QgbHNfdyA9IDIwLFxuXHRcdGxzX2ggPSAyMDtcblxuXHRsZWdlbmRfZW50cnkuYXBwZW5kKFwicmVjdFwiKVxuXHRcdC5hdHRyKFwieFwiLCAyMClcblx0XHQuYXR0cihcInlcIiwgZnVuY3Rpb24oZCwgaSkge1xuXHRcdFx0cmV0dXJuIGhlaWdodCAtIChpICogbHNfaCkgLSAyICogbHNfaDtcblx0XHR9KVxuXHRcdC5hdHRyKFwid2lkdGhcIiwgbHNfdylcblx0XHQuYXR0cihcImhlaWdodFwiLCBsc19oKVxuXHRcdC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0cmV0dXJuIGNvbG9yU2NhbGUoZFswXSk7XG5cdFx0fSlcblx0XHQuc3R5bGUoXCJvcGFjaXR5XCIsIDAuOCk7XG5cbiAgLyogQ2FuIGNvbnRyb2wgbGVnZW5kIG51bWJlciBwcm9wZXJ0aWVzIGhlcmUqL1xuXHRsZWdlbmRfZW50cnkuYXBwZW5kKFwidGV4dFwiKVxuICAuYXR0cihcInN0cm9rZVwiLCBcImJsYWNrXCIpXG5cdFx0LmF0dHIoXCJ4XCIsIDUwKVxuXHRcdC5hdHRyKFwieVwiLCBmdW5jdGlvbihkLCBpKSB7XG5cdFx0XHRyZXR1cm4gaGVpZ2h0IC0gKGkgKiBsc19oKSAtIGxzX2ggLSA2O1xuXHRcdH0pLnRleHQoZnVuY3Rpb24oZCwgaSkge1xuXHRcdFx0aWYgKGkgPT09IDApIHJldHVybiBcIjwgXCIgKyBkWzFdICsgXCJcIjtcblx0XHRcdGlmIChkWzFdIDwgZFswXSkgcmV0dXJuIGRbMF0gKyBcIiBtXCI7XG5cdFx0XHRyZXR1cm4gZFswXSArIFwiIC0gXCIgKyBkWzFdICsgXCJcIjtcblx0XHR9KTtcblxuICAvKiBDYW4gY29udHJvbCBhdHRyaWJ1dGVzIG9mIHRleHQgaGVyZVxuICBhIGxvd2VyIHkgdmFsdWUgd2lsbCBtYWtlIHRoZSBsZWdlbmQgdGl0bGUgaGlnaGVyIGluIHRoZSBkaXNwbGF5Ki9cblx0bGVnZW5kLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgMTUpLmF0dHIoXCJ5XCIsIDI2MClcbiAgICAuYXR0cihcInN0cm9rZVwiLCBcImJsYWNrXCIpXG4gICAgLnRleHQoXCJIYXBwaW5lc3MgU2NvcmVcIik7XG59XG5cbi8vIFpvb20gZnVuY3Rpb25hbGl0eVxuZnVuY3Rpb24gY2xpY2soZCkge1xuICB2YXIgeCwgeSwgaztcblxuICBpZiAoZCAmJiBjZW50ZXJlZCAhPT0gZCkge1xuICAgIHZhciBjZW50cm9pZCA9IHBhdGguY2VudHJvaWQoZCk7XG4gICAgeCA9IC0oY2VudHJvaWRbMF0gKiA2KTtcbiAgICB5ID0gKGNlbnRyb2lkWzFdICogNik7XG4gICAgayA9IDM7XG4gICAgY2VudGVyZWQgPSBkO1xuICB9IGVsc2Uge1xuICAgIHggPSAwO1xuICAgIHkgPSAwO1xuICAgIGsgPSAxO1xuICAgIGNlbnRlcmVkID0gbnVsbDtcbiAgfVxuXG4gIHdvcmxkLnNlbGVjdEFsbChcInBhdGhcIilcbiAgICAgIC5jbGFzc2VkKFwiYWN0aXZlXCIsIGNlbnRlcmVkICYmIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgPT09IGNlbnRlcmVkOyB9KTtcblxuICB3b3JsZC50cmFuc2l0aW9uKClcbiAgICAgIC5kdXJhdGlvbig3NTApXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHggKyBcIixcIiArIHkgKyBcIikgc2NhbGUoXCIgKyBrICsgXCIpXCIgKTtcbiAgXG59Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztDQUFBO0NBQ0EsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Q0FDNUIsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7Q0FDMUIsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7Q0FDNUIsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLE9BQU8sRUFBRTtDQUNwQixDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFO0NBQ2hCLENBQUMsUUFBUSxHQUFHLHFGQUFxRjtDQUNqRyxDQUFDLGNBQWMsR0FBRyx1SEFBdUgsQ0FBQztBQUMxSTtDQUNBLElBQUksUUFBUSxFQUFFLEtBQUssQ0FBQztBQUNwQjtDQUNBO0NBQ0EsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDLFdBQVcsRUFBRTtDQUNuQyxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUM7Q0FDWixFQUFFLFNBQVMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckM7Q0FDQTtDQUNBLE1BQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQyxjQUFjLEVBQUU7Q0FDdEMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7Q0FDbEMsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzFCO0NBQ0E7Q0FDQTtBQUNBO0NBQ0E7Q0FDQTtBQUNBO0NBQ0E7Q0FDQSxNQUFNLE9BQU8sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7Q0FDL0MsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQztDQUMxQixFQUFFLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEI7Q0FDQTtDQUNBLEVBQUUsQ0FBQyxLQUFLLEVBQUU7Q0FDVixFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQztDQUMxQixFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLGNBQWMsRUFBRSxTQUFTLENBQUMsRUFBRTtDQUM1QyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztDQUN2QyxFQUFFLENBQUM7Q0FDSCxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNmO0NBQ0E7Q0FDQSxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztDQUNsQixHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDO0NBQzlCLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUM7Q0FDdEIsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQztDQUN4QixFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDckI7QUFDQTtDQUNBO0NBQ0E7Q0FDQTtBQUNBO0NBQ0EsU0FBUyxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRTtDQUM1QjtDQUNBO0FBQ0E7Q0FDQSxDQUFDLElBQUksU0FBUyxHQUFHLFNBQVMsQ0FBQyxFQUFFO0NBQzdCLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUM7Q0FDMUIsSUFBSSxVQUFVLEVBQUU7Q0FDaEIsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDO0NBQ2pCLElBQUksS0FBSyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUM7Q0FDeEIsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0NBQ25DLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7Q0FDakIsSUFBSSxVQUFVLEVBQUU7Q0FDaEIsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDO0NBQ2pCLElBQUksS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7Q0FDdkIsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0NBQzdCLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxFQUFFLElBQUksSUFBSSxDQUFDO0NBQ3JELElBQUksS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEVBQUUsSUFBSSxJQUFJLENBQUM7Q0FDOUMsSUFBSSxVQUFVLEVBQUUsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDO0NBQzlCLElBQUksS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7Q0FDdkIsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUcsdUJBQXVCLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDOUUsR0FBRTtBQUNGO0NBQ0EsQ0FBQyxJQUFJLFVBQVUsR0FBRyxXQUFXO0NBQzdCLEVBQUUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUM7Q0FDMUIsSUFBSSxVQUFVLEVBQUU7Q0FDaEIsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDO0NBQ2pCLElBQUksS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7Q0FDdkIsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0NBQ25DLEVBQUUsT0FBTyxDQUFDLFVBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUM7Q0FDcEMsSUFBSSxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO0NBQ3hCLEdBQUU7QUFDRjtDQUNBO0NBQ0EsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7Q0FDeEIsS0FBSyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0NBQzVCLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7Q0FDeEIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztDQUN0QixHQUFHLEtBQUssRUFBRTtDQUNWLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztDQUNqQjtDQUNBO0NBQ0EsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDakQ7Q0FDQTtDQUNBLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsRUFBRTtDQUNqQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJO0NBQzNCLEdBQUcsQ0FBQztBQUNKO0NBQ0E7Q0FDQSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLEVBQUU7Q0FDNUIsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztDQUNqQyxHQUFHLE9BQU8sVUFBVSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztDQUM5QixHQUFHLENBQUM7QUFDSjtDQUNBO0NBQ0EsR0FBRyxLQUFLLENBQUMsUUFBUSxFQUFFLGFBQWEsQ0FBQztDQUNqQyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLEVBQUU7Q0FDN0IsR0FBRyxPQUFPLFNBQVM7Q0FDbkIsR0FBRyxDQUFDO0NBQ0osR0FBRyxJQUFJLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxFQUFFO0NBQzFCLEdBQUcsT0FBTyxDQUFDLENBQUMsRUFBRTtDQUNkLEdBQUcsQ0FBQztDQUNKLEdBQUcsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7Q0FDdEIsR0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQztDQUM3QixHQUFHLEVBQUUsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDO0NBQy9CLEdBQUcsRUFBRSxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztDQUN0QjtDQUNBO0NBQ0EsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFO0NBQzNCLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0NBQ2pCLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEI7Q0FDQSxDQUFDLE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO0NBQy9CLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztBQUN4QjtDQUNBLENBQUMsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUM7Q0FDbEQsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRTtDQUMzQyxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2xDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDMUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUMxQyxHQUFHLE9BQU8sQ0FBQyxDQUFDO0NBQ1osR0FBRyxDQUFDLENBQUM7Q0FDTCxHQUFHLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7Q0FDdEIsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ2pDO0NBQ0EsQ0FBQyxNQUFNLElBQUksR0FBRyxFQUFFO0NBQ2hCLEVBQUUsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNaO0NBQ0EsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztDQUM1QixHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDO0NBQ2hCLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsRUFBRSxDQUFDLEVBQUU7Q0FDNUIsR0FBRyxPQUFPLE1BQU0sSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztDQUN6QyxHQUFHLENBQUM7Q0FDSixHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDO0NBQ3RCLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7Q0FDdkIsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxFQUFFO0NBQzdCLEdBQUcsT0FBTyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDM0IsR0FBRyxDQUFDO0NBQ0osR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ3pCO0NBQ0E7Q0FDQSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO0NBQzVCLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUM7Q0FDMUIsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQztDQUNoQixHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0NBQzVCLEdBQUcsT0FBTyxNQUFNLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUM7Q0FDekMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsRUFBRTtDQUN6QixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQ3hDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztDQUN2QyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQ25DLEdBQUcsQ0FBQyxDQUFDO0FBQ0w7Q0FDQTtDQUNBO0NBQ0EsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUM7Q0FDbkQsS0FBSyxJQUFJLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQztDQUM1QixLQUFLLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0NBQzdCLENBQUM7QUFDRDtDQUNBO0NBQ0EsU0FBUyxLQUFLLENBQUMsQ0FBQyxFQUFFO0NBQ2xCLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNkO0NBQ0EsRUFBRSxJQUFJLENBQUMsSUFBSSxRQUFRLEtBQUssQ0FBQyxFQUFFO0NBQzNCLElBQUksSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUNwQyxJQUFJLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztDQUMzQixJQUFJLENBQUMsSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Q0FDMUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ1YsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0NBQ2pCLEdBQUcsTUFBTTtDQUNULElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNWLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNWLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNWLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQztDQUNwQixHQUFHO0FBQ0g7Q0FDQSxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDO0NBQ3pCLE9BQU8sT0FBTyxDQUFDLFFBQVEsRUFBRSxRQUFRLElBQUksU0FBUyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDN0U7Q0FDQSxFQUFFLEtBQUssQ0FBQyxVQUFVLEVBQUU7Q0FDcEIsT0FBTyxRQUFRLENBQUMsR0FBRyxDQUFDO0NBQ3BCLE9BQU8sSUFBSSxDQUFDLFdBQVcsRUFBRSxZQUFZLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsVUFBVSxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztDQUM3RTtDQUNBOzs7OyJ9